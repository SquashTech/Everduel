<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Card Battler - Clean Architecture</title>
    
    <!-- Single CSS File -->
    <link rel="stylesheet" href="css/game.css">
</head>
<body>
    <!-- Loading Indicator -->
    <div id="loadingIndicator" class="app-loading">
        <div>ğŸ® Loading Card Game...</div>
    </div>

    <div class="game-container">
        <!-- AI Player Area -->
        <div class="player-area">
            <div class="battlefield-container">
                <div class="battlefield" id="aiBattlefield">
                    <!-- AI Back Row (slots 3,4,5) displayed at top -->
                    <div class="battlefield-row">
                        <div class="slot-container">
                            <div class="slot back-row" data-player="ai" data-slot="3"></div>
                            <div class="slot-buff" id="ai-slot-3-buff" data-buff="none"></div>
                        </div>
                        <div class="slot-container">
                            <div class="slot back-row" data-player="ai" data-slot="4"></div>
                            <div class="slot-buff" id="ai-slot-4-buff" data-buff="none"></div>
                        </div>
                        <div class="slot-container">
                            <div class="slot back-row" data-player="ai" data-slot="5"></div>
                            <div class="slot-buff" id="ai-slot-5-buff" data-buff="none"></div>
                        </div>
                    </div>
                    <!-- AI Front Row (slots 0,1,2) displayed at bottom -->
                    <div class="battlefield-row">
                        <div class="slot-container">
                            <div class="slot front-row" data-player="ai" data-slot="0"></div>
                            <div class="slot-buff" id="ai-slot-0-buff" data-buff="none"></div>
                        </div>
                        <div class="slot-container">
                            <div class="slot front-row" data-player="ai" data-slot="1"></div>
                            <div class="slot-buff" id="ai-slot-1-buff" data-buff="none"></div>
                        </div>
                        <div class="slot-container">
                            <div class="slot front-row" data-player="ai" data-slot="2"></div>
                            <div class="slot-buff" id="ai-slot-2-buff" data-buff="none"></div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        
        <!-- AI Player Info - Separate Box -->
        <div class="player-info-box ai-info">
            <div class="dragon-soul-display" id="aiDragonSoul">
                <span class="dragon-soul-icon">ğŸ‰</span>
                <span class="dragon-soul-count">0</span>
            </div>
            <h3>AI Player</h3>
            <div class="player-stats-compact">
                <div class="health">â¤ï¸ <span id="aiHealth">20</span></div>
                <div class="gold">ğŸ’° <span id="aiGold">2/2</span></div>
                <button class="btn btn-deck btn-deck-inline" id="aiDeckBtn" title="View AI Deck">Deck: <span id="aiDeckCount">0</span></button>
            </div>
        </div>

        <!-- Player Area -->
        <div class="player-area">
            <div class="battlefield-container">
                <div class="battlefield" id="playerBattlefield">
                    <div class="battlefield-row">
                        <div class="slot-container">
                            <div class="slot front-row" data-player="player" data-slot="0"></div>
                            <div class="slot-buff" id="player-slot-0-buff" data-buff="none"></div>
                        </div>
                        <div class="slot-container">
                            <div class="slot front-row" data-player="player" data-slot="1"></div>
                            <div class="slot-buff" id="player-slot-1-buff" data-buff="none"></div>
                        </div>
                        <div class="slot-container">
                            <div class="slot front-row" data-player="player" data-slot="2"></div>
                            <div class="slot-buff" id="player-slot-2-buff" data-buff="none"></div>
                        </div>
                    </div>
                    <div class="battlefield-row">
                        <div class="slot-container">
                            <div class="slot back-row" data-player="player" data-slot="3"></div>
                            <div class="slot-buff" id="player-slot-3-buff" data-buff="none"></div>
                        </div>
                        <div class="slot-container">
                            <div class="slot back-row" data-player="player" data-slot="4"></div>
                            <div class="slot-buff" id="player-slot-4-buff" data-buff="none"></div>
                        </div>
                        <div class="slot-container">
                            <div class="slot back-row" data-player="player" data-slot="5"></div>
                            <div class="slot-buff" id="player-slot-5-buff" data-buff="none"></div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        
        <!-- Game Log Display - Green Box -->
        <div class="game-log-display">
            <div class="game-log-header">ğŸ“œ Game Log</div>
            <div class="game-log-content" id="gameLogDisplay">
                <div class="game-log-entry">ğŸ® Welcome to Card Battler!</div>
                <div class="game-log-entry">ğŸ”„ Game started - Your turn</div>
            </div>
        </div>
        
        <!-- Player Info - Separate Box -->
        <div class="player-info-box player-info">
            <div class="dragon-soul-display" id="playerDragonSoul">
                <span class="dragon-soul-icon">ğŸ‰</span>
                <span class="dragon-soul-count">0</span>
            </div>
            <h3>Your Turn</h3>
            <div class="player-stats-compact">
                <div class="health">â¤ï¸ <span id="playerHealth">20</span></div>
                <div class="gold">ğŸ’° <span id="playerGold">2/2</span></div>
                <button class="btn btn-deck btn-deck-inline" id="playerDeckBtn" title="View Your Deck">Deck: <span id="playerDeckCount">0</span></button>
            </div>
            <button class="btn btn-primary" id="endTurnBtn">End Turn</button>
        </div>

        <!-- Hand Cards - Extended Bottom Right -->
        <div class="hand-cards-horizontal" id="playerHand">
            <div class="hand-header">Your Hand</div>
            <div class="hand-cards-container" id="handCardsContainer">
                <!-- Cards will be dynamically added here -->
            </div>
        </div>

        <!-- Fixed Sidebar -->
        <div class="fixed-controls">
            <div class="control-section">
                <h4>Information</h4>
                <button class="btn btn-secondary" id="howToPlayBtnSidebar">How to Play</button>
            </div>
            
            <div class="control-section">
                <h4>Draft Cards</h4>
                <button class="btn btn-primary" id="draftTier1Btn" data-tier="1">
                    Tier 1 (2 ğŸ’°) <span class="remaining-count" id="tier1Count">25</span>
                </button>
                <button class="btn btn-primary" id="draftTier2Btn" data-tier="2">
                    Tier 2 (4 ğŸ’°) <span class="remaining-count" id="tier2Count">25</span>
                </button>
                <button class="btn btn-primary" id="draftTier3Btn" data-tier="3">
                    Tier 3 (6 ğŸ’°) <span class="remaining-count" id="tier3Count">25</span>
                </button>
                <button class="btn btn-primary" id="draftTier4Btn" data-tier="4">
                    Tier 4 (8 ğŸ’°) <span class="remaining-count" id="tier4Count">25</span>
                </button>
                <button class="btn btn-primary" id="draftTier5Btn" data-tier="5">
                    Tier 5 (10 ğŸ’°) <span class="remaining-count" id="tier5Count">25</span>
                </button>
            </div>
            
            <div class="control-section">
                <h4>Other Actions</h4>
                <button class="btn btn-secondary" id="spellDraftBtn">Draft Spell (1 ğŸ’°)</button>
                <button class="btn btn-secondary" id="drawDeckBtn">Draw from Deck (3 ğŸ’°)</button>
            </div>
        </div>
    </div>

    <!-- Draft Modal -->
    <div id="draftOverlay" class="modal-overlay">
        <div class="modal-content">
            <button class="modal-close">Ã—</button>
            <div class="modal-header">
                <div id="draftInfo">Choose a Card</div>
            </div>
            <div id="draftCards" class="draft-options"></div>
        </div>
    </div>

    <!-- Deck Modal -->
    <div id="deckModal" class="modal-overlay">
        <div class="modal-content deck-modal">
            <button class="modal-close">Ã—</button>
            <div class="modal-header">
                <h2>Your Deck</h2>
            </div>
            <div id="deckContent" class="deck-cards"></div>
        </div>
    </div>

    <!-- Keyword Tooltip -->
    <div id="keywordTooltip" class="keyword-tooltip" style="display: none;">
        <div class="tooltip-header"></div>
        <div class="tooltip-description"></div>
    </div>

    <!-- How to Play Modal -->
    <div id="howToPlayModal" class="modal-overlay">
        <div class="modal-content how-to-play-content">
            <button class="modal-close">Ã—</button>
            <h2>How to Play - Card Battler</h2>
            
            <h3>ğŸ¯ Objective</h3>
            <p>Reduce your opponent's health to 0 by strategically drafting cards, placing units, and attacking.</p>
            
            <h3>ğŸ’° Gold & Drafting</h3>
            <p>â€¢ Each turn you gain gold (2â†’4â†’6â†’8â†’10)</p>
            <p>â€¢ Spend gold to draft cards from different tiers</p>
            <p>â€¢ Higher tiers cost more gold but have stronger cards</p>
            
            <h3>ğŸ´ Hand & Battlefield</h3>
            <p>â€¢ Keep up to 3 cards in your hand</p>
            <p>â€¢ Place units from hand onto your battlefield (3x2 grid)</p>
            <p>â€¢ Units have Attack/Health stats and special abilities</p>
            
            <h3>âš”ï¸ Combat System</h3>
            <p><strong>Column-Based Combat:</strong> Units attack within their column (left/middle/right)</p>
            
            <h4>ğŸ¯ Unit Targeting Rules:</h4>
            <p><strong>Normal Units:</strong> Front Row â†’ Back Row â†’ Player (if column empty)</p>
            <p><strong>Ranged Units:</strong> Ignore front row, attack Back Row â†’ Player directly</p>
            <p><strong>Flying Units:</strong> Always attack player, UNLESS there's an enemy Flying unit in the same column</p>
            
            <h4>ğŸ›¡ï¸ Special Abilities:</h4>
            <p><strong>Flying:</strong> Only other Flying units can attack Flying units</p>
            <p><strong>Rush:</strong> Can attack the turn it's played</p>
            <p><strong>Sneaky:</strong> First attack targets enemy player directly</p>
            <p><strong>Trample:</strong> Excess damage carries over to player</p>
            <p><strong>Unleash:</strong> Triggers special effect when summoned</p>
            <p><strong>Last Gasp:</strong> Triggers special effect when destroyed</p>
            <p><strong>Kindred:</strong> Bonuses when played with same tag units</p>
            <p><strong>Manacharge:</strong> Triggers when Blue Unleash abilities are used</p>
            
            <p>â€¢ When units die, they return to your deck</p>
            <p>â€¢ Draw from deck costs 3 gold</p>
            
            <h3>ğŸ® Controls</h3>
            <p>â€¢ Click cards in hand to select them</p>
            <p>â€¢ Click battlefield slots to place selected units</p>
            <p>â€¢ Use sidebar buttons to draft and manage cards</p>
        </div>
    </div>

    <!-- Game Log Panel -->
    <div id="gameLogPanel" class="game-log-panel hidden">
        <div class="log-header">
            <h3>ğŸ“œ Game Log</h3>
            <div class="log-controls">
                <button class="log-clear-btn" id="gameLogClearBtn">Clear</button>
                <button class="log-close-btn" id="gameLogCloseBtn">Ã—</button>
            </div>
        </div>
        <div class="log-entries" id="gameLogEntries">
            <div class="log-entry">ğŸ® Welcome to Card Battler!</div>
            <div class="log-entry">ğŸ”„ Game started - Your turn</div>
        </div>
    </div>

    <!-- Notification System -->
    <div class="notification" id="notification"></div>

    <!-- Main Game Script - Using Simple Implementation -->
    <script type="module" src="src/SimpleMain.js"></script>
    
    <script>
        // Initialize game when page loads
        document.addEventListener('DOMContentLoaded', () => {
            console.log('ğŸ® Clean Card Battler starting...');
        });
    </script>
</body>
</html>